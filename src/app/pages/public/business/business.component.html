<p>business works!</p>
<p>register works!</p>
<div class="register-container">
  <h2>Registro</h2>
  <form (ngSubmit)="onSubmit()" [formGroup]="formData">
    
    <!-- Campo Nombre -->
    <div class="form-group">
      <label for="firstname">Nombre</label>
      <input type="text" id="firstname" formControlName="firstname" required class="form-control" />
      <div class="error">
        <small *ngIf="formData.get('firstname')?.errors?.['required'] && (formData.get('firstname')?.dirty || formData.get('firstname')?.touched)">
          El campo 'nombre' es obligatorio
        </small>
      </div>
    </div>

    <!-- Campo Edad -->
    <div class="form-group">
      <label for="age">Edad</label>
      <input type="number" min="1" max="150" id="age" formControlName="age" required class="form-control" />
      <div class="error">
        <small *ngIf="formData.get('age')?.errors?.['required'] && (formData.get('age')?.dirty || formData.get('age')?.touched)">
          El campo 'Edad' es obligatorio
        </small>
      </div>
    </div>

    <!-- Campo Correo Electrónico -->
    <div class="form-group">
      <label for="email">Correo Electrónico</label>
      <input type="email" id="email" formControlName="email" required class="form-control" />
      <div class="error">
        <small *ngIf="formData.get('email')?.errors?.['required'] && (formData.get('email')?.dirty || formData.get('email')?.touched)">
          El campo 'email' es obligatorio
        </small>
        <small *ngIf="formData.get('email')?.errors?.['email'] && (formData.get('email')?.dirty || formData.get('email')?.touched)">
          Email con formato no válido
        </small>
      </div>
    </div>

    <!-- Campo Contraseña -->
    <div class="form-group">
      <label for="password">Contraseña</label>
      <input type="password" id="password" formControlName="password" required class="form-control" />
      <div class="error">
        <small *ngIf="formData.get('password')?.errors?.['required'] && (formData.get('password')?.dirty || formData.get('password')?.touched)">
          El campo 'contraseña' es obligatorio
        </small>
        <small *ngIf="formData.get('password')?.errors?.['minlength'] && (formData.get('password')?.dirty || formData.get('password')?.touched)">
          La contraseña debe tener mínimo 8 caracteres
        </small>
        <small *ngIf="formData.get('password')?.errors?.['maxlength'] && (formData.get('password')?.dirty || formData.get('password')?.touched)">
          La contraseña debe tener máximo 20 caracteres
        </small>
      </div>
    </div>

    <!-- Campo Locación -->
    <div class="form-group">
      <label for="location">Locación</label>
      <input type="text" id="location" formControlName="location" required class="form-control" />
      <div class="error">
        <small *ngIf="formData.get('location')?.errors?.['required'] && (formData.get('location')?.dirty || formData.get('location')?.touched)">
          El campo 'locación' es obligatorio
        </small>
      </div>
    </div>

    <!-- Campo Descripción -->
    <div class="form-group">
      <label for="description">Descripción</label>
      <input type="text" id="description" formControlName="description" required class="form-control" />
      <div class="error">
        <small *ngIf="formData.get('description')?.errors?.['required'] && (formData.get('description')?.dirty || formData.get('description')?.touched)">
          El campo 'descripción' es obligatorio
        </small>
      </div>
    </div>

    <!-- Campo Ciudad -->
    <div class="form-group">
      <label for="city">Ciudad</label>
      <!-- <input type="text" id="city" formControlName="city" required class="form-control" /> -->
       <select formControlName="city" id="city" class="form-control">
        @for (ciudad of ciudades; track $index) {
          <option [value]="ciudad.name">
            {{ciudad.name}}
          </option>
        }

       </select>
      <div class="error">
        <small *ngIf="formData.get('city')?.errors?.['required'] && (formData.get('city')?.dirty || formData.get('city')?.touched)">
          El campo 'ciudad' es obligatorio
        </small>
      </div>
    </div>

    <!-- Campo Coordenadas -->
    <div class="form-group">
      <label for="coordinates">Coordenadas</label>
      <input type="text" id="coordinates" formControlName="coordinates" required class="form-control" />
      <div class="error">
        <small *ngIf="formData.get('coordinates')?.errors?.['required'] && (formData.get('coordinates')?.dirty || formData.get('coordinates')?.touched)">
          El campo 'coordenadas' es obligatorio
        </small>
      </div>
    </div>

    <!-- Campo Contacto -->
    <div class="form-group">
      <label for="contact">Contacto</label>
      <input type="text" id="contact" formControlName="contact" required class="form-control" />
      <div class="error">
        <small *ngIf="formData.get('contact')?.errors?.['required'] && (formData.get('contact')?.dirty || formData.get('contact')?.touched)">
          El campo 'contacto' es obligatorio
        </small>
      </div>
    </div>

    <!-- Campo Teléfono -->
    <div class="form-group">
      <label for="phone">Teléfono</label>
      <input type="text" id="phone" formControlName="phone" required class="form-control" />
      <div class="error">
        <small *ngIf="formData.get('phone')?.errors?.['required'] && (formData.get('phone')?.dirty || formData.get('phone')?.touched)">
          El campo 'teléfono' es obligatorio
        </small>
        <small *ngIf="formData.get('phone')?.errors?.['pattern'] && (formData.get('phone')?.dirty || formData.get('phone')?.touched)">
          Solo se permiten números en 'teléfono'
        </small>
      </div>
    </div>

    <!-- Campo Dueño -->
    <div class="form-group">
      <label for="owner">Dueño</label>
      <input type="text" id="owner" formControlName="owner" required class="form-control" />
      <div class="error">
        <small *ngIf="formData.get('owner')?.errors?.['required'] && (formData.get('owner')?.dirty || formData.get('owner')?.touched)">
          El campo 'dueño' es obligatorio
        </small>
      </div>
    </div>

    <button type="submit" class="btn-submit" [disabled]="!formData.valid">Registrarse</button>
  </form>
</div>

